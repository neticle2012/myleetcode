# 17.21. 直方图的水量

[力扣题目链接](https://leetcode-cn.com/problems/volume-of-histogram-lcci/)


# 初见思路

## 基本思路
待补充

## 边界问题


## Java代码
```java
class Solution {
    public int trap(int[] height) {
        if (height == null){
            return -1;
        }
        int res = 0;
        Deque<Node> stack = new LinkedList<>();//单调栈，从栈底到栈顶依次递减
        for (int item : height){
            int popCnt = 1;
            while (!stack.isEmpty() && item > stack.peek().val){
                Node popNode = stack.pop();
                res += (Math.min(popNode.prevMax, item) - popNode.val) * popNode.popCnt;
                popCnt += popNode.popCnt;
            }
            int prevMax = stack.isEmpty() ? item : stack.peek().prevMax;
            stack.push(new Node(item, prevMax, popCnt));
        }
        return res;
    }
}

class Node {
    int val; 
    int prevMax;//该元素前面的最大值（即单调栈栈底的值）
    int popCnt;//popCnt = 当前累积出栈的元素个数 + 1（这个元素）
    //只有当this.val > 栈顶元素.val致使栈顶元素出栈时，才将栈顶元素的popCnt累加到this.popCnt上

    public Node(int val, int prevMax, int popCnt){
        this.val = val;
        this.prevMax = prevMax;
        this.popCnt = popCnt;
    }
}
```

## 复杂度分析
- 时间复杂度：$O(1)$
- 空间复杂度：$O(Nk)$，其中$N$为每个栈的大小，$k$为我们需要实现的栈的个数，本题中为$k=3$


# 民间解法

## 基本思路


## 边界问题


## Java代码
```java

```

## 复杂度分析
- 时间复杂度：$O(1)$
- 空间复杂度：$O(Nk)$，其中$N$为每个栈的大小，$k$为我们需要实现的栈的个数，本题中为$k=3$